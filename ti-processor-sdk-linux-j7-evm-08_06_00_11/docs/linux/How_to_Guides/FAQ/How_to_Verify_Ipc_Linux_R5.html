

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>4.1.10. How to verify IPC between Linux and MCU R5 in Keystone devices? &mdash; Processor SDK Linux for J721e Documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../../_static/theme_overrides.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../../../genindex.html"/>
        <link rel="search" title="Search" href="../../../search.html"/>
    <link rel="top" title="Processor SDK Linux for J721e Documentation" href="../../../index.html"/>
        <link rel="up" title="4.1. Developer Notes" href="../../How_to_Guides_Developer_Notes.html"/>
        <link rel="next" title="4.1.11. How to configure K3 MSMC memory for use as SRAM or L3 cache?" href="How_to_Configure_MSMC_memory.html"/>
        <link rel="prev" title="4.1.9. How to visualize statistics data" href="../Target/How_to_visualize_statistics_data.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">
  <header id="tiHeader">
    <div class="top">
      <ul>
        <li id="top_logo">
          <a href="http://www.ti.com">
            <img src="../../../_static/img/ti_logo.png"/>
          </a>
        </li>
      </ul>
    </div>
    <div class="nav"></div>
  </header>
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../devices/J7/linux/index.html" class="icon icon-home"> Processor SDK Linux for J721e
          

          
          </a>

          
            
            
              <div class="version">
                08_06_00
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../Overview.html">1. Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../devices/J7/linux/Release_Specific.html">2. Release Specific</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Foundational_Components.html">3. Foundational Components</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../How_to_Guides.html">4. How to Guides</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../How_to_Guides_Developer_Notes.html">4.1. Developer Notes</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../Host/Connect_to_an_EVM_via_Telnet.html">4.1.1. Connect to an EVM via Telnet</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Host/How_to_Setup_a_Samba_Server.html">4.1.2. How to Setup a Samba Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Host/Boot_Sequence.html">4.1.3. Boot Sequence</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Host/Moving_Files_to_the_Target_System.html">4.1.4. Moving Files to the Target System</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Host/How_to_Flash_Linux_System_from_U-boot.html">4.1.5. How to Flash Linux System from U-boot</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Target/Processor_SDK_Linux_File_System_Optimization_Customization.html">4.1.6. SDK File System Optimization/Customization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Target/How_to_Change_dtb_File.html">4.1.7. How to change dtb files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Target/How_to_flash_emmc_device.html">4.1.8. How to flash eMMC device</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Target/How_to_visualize_statistics_data.html">4.1.9. How to visualize statistics data</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">4.1.10. How to verify IPC between Linux and MCU R5 in Keystone devices?</a></li>
<li class="toctree-l3"><a class="reference internal" href="How_to_Configure_MSMC_memory.html">4.1.11. How to configure K3 MSMC memory for use as SRAM or L3 cache?</a></li>
<li class="toctree-l3"><a class="reference internal" href="How_to_Check_Device_Tree_Info.html">4.1.12. How to check some device tree information from user-space of Linux?</a></li>
<li class="toctree-l3"><a class="reference internal" href="How_to_Integrate_Open_Source_Software.html">4.1.13. How do I integrate a different version of open source software than what is packaged in Processor SDK Linux J721e?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Host/How_to_Build_a_Ubuntu_Linux_host_under_VMware.html">4.1.14. How to Build a Ubuntu Linux host under VMware</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Host/K3_Resource_Partitioning_Tool.html">4.1.15. K3 Resource Partitioning Tool</a></li>
<li class="toctree-l3"><a class="reference internal" href="Tda4_Latest_FAQs.html">4.1.16. Latest FAQs on TDA4</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../How_to_Guides_Hardware_Setup_with_CCS.html">4.2. Hardware EVM Setup</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Documentation_Tarball.html">5. Documentation Tarball</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../devices/J7/linux/index.html">Processor SDK Linux for J721e</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../devices/J7/linux/index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../How_to_Guides.html">4. How to Guides</a> &raquo;</li>
      
          <li><a href="../../How_to_Guides_Developer_Notes.html">4.1. Developer Notes</a> &raquo;</li>
      
    <li>4.1.10. How to verify IPC between Linux and MCU R5 in Keystone devices?</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="how-to-verify-ipc-between-linux-and-mcu-r5-in-keystone-devices">
<h1>4.1.10. How to verify IPC between Linux and MCU R5 in Keystone devices?<a class="headerlink" href="#how-to-verify-ipc-between-linux-and-mcu-r5-in-keystone-devices" title="Permalink to this headline">Â¶</a></h1>
<p>Automotive applications have different memory needs and use a different memory
map defined in the auto-common.dtbo file. Therefore, the default Processor SDK Linux J721e
is shipped with firmwares for only a few auxiliary cores in the Keystone devices.</p>
<p>Although the out-of-the-box experience does not allow to verify the
interprocessor communication (IPC) between Linux and the MCU R5,
the following steps describe how this can be done using the SDK.</p>
<p class="rubric" id="faq-steps-to-build-ipc-echotest-binaries">Steps to build IPC echotest binaries</p>
<p>All the IPC echotest binaries are built as a Yocto package <strong>ipc-lld-fw</strong>.
Since these binaries conflict with the automotive demos, this package is not
built in the SDK installed by default. This can be built using Yocto and installed
into the filesystem on target.</p>
<p>Make sure that you have setup the Yocto build environment for this. Refer to
<a class="reference external" href="Overview_Building_the_SDK.html">Building the SDK</a> section for all details.</p>
<p>Once the Yocto build is setup, use bitbake to build the specific package ipc-lld-fw
as shown below:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>TOOLCHAIN_BASE=&lt;PATH_TO_TOOLCHAIN&gt; MACHINE=&lt;machine&gt; bitbake -k ipc-lld-fw
</pre></div>
</div>
<p>This will create the firmware package for all the remoteproc cores in the system
where the IPC echotest functionality is implemented. The package will be located
at the directory <strong>&lt;Yocto work directory&gt;/j7_evm-linux/ipc-lld-fw/&lt;version&gt;/deploy-ipks/</strong>.</p>
<p class="rubric" id="faq-installing-ipc-echotest-binaries">Installing the IPC echotest binaries</p>
<p>Once the package is built on the host machine, copy it to the target filesystem.
Run thethe  following commands to install the package to target filesystem.</p>
<p>The <strong>update-alternatives</strong> command in the below instructions will set the priority
for the IPC firmware very high. This is to ensure that the symlinks are updated
appropriately. Typical firmwares will have priorities up to 20, setting the IPC
firmware priority to 100 gives it highest priority.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">priority override is done only for the automotive firmwares like ethernet firmware
and display sharing firmware. If you have installed additional firmwares,
you should do it for others as well.</p>
</div>
<div class="highlight-text"><div class="highlight"><pre><span></span>opkg install ipc-lld-fw*.ipk
update-alternatives --install /lib/firmware/j7-main-r5f0_0-fw j7-main-r5f0_0-fw /lib/firmware/pdk-ipc/ipc_echo_test_mcu2_0_release.strip.xer5f 100
update-alternatives --install /lib/firmware/j7-main-r5f0_1-fw j7-main-r5f0_1-fw /lib/firmware/pdk-ipc/ipc_echo_test_mcu2_1_release.strip.xer5f 100
</pre></div>
</div>
<p>After this, make sure that all the firmwares are pointing to the pdk-ipc/
version of the binaries by running the following:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>ls -l /lib/firmware/j7*
</pre></div>
</div>
<p>Reboot the board and you will see the IPC echotest binaries loaded onto different
CPU cores.</p>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="How_to_Configure_MSMC_memory.html" class="btn btn-neutral float-right" title="4.1.11. How to configure K3 MSMC memory for use as SRAM or L3 cache?" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../Target/How_to_visualize_statistics_data.html" class="btn btn-neutral" title="4.1.9. How to visualize statistics data" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
      <a href="http://www.ti.com/corp/docs/legal/copyright.shtml">&copy; Copyright 1995-2021</a>, Texas Instruments Incorporated. All rights reserved. <br>
      <a href="http://www.ti.com/corp/docs/legal/trademark/trademrk.htm">Trademarks</a> | <a href="http://www.ti.com/corp/docs/legal/privacy.shtml">Privacy policy</a> | <a href="http://www.ti.com/corp/docs/legal/termsofuse.shtml">Terms of use</a> | <a href="http://www.ti.com/lsds/ti/legal/termsofsale.page">Terms of sale</a>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'08_06_00',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

    <script src="http://www.ti.com/assets/js/headerfooter/analytics.js" type="text/javascript" charset="utf-8"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
        });

      var menuHeight = window.innerHeight;

      var contentOffset = $(".wy-nav-content-wrap").offset();
      var contentHeight = $(".wy-nav-content-wrap").height();
      var contentBottom = contentOffset.top + contentHeight;

      function setNavbarTop() {
          var scrollTop = $(window).scrollTop();
          var maxTop = scrollTop + menuHeight;

          // If past the header
          if (scrollTop > contentOffset.top && maxTop < contentBottom) {
            stickyTop = scrollTop - contentOffset.top;
          } else if (maxTop > contentBottom) {
            stickyTop = scrollTop - contentOffset.top - (maxTop - contentBottom);
          } else {
            stickyTop = 0;
          }

          $(".wy-nav-side").css("top", stickyTop);
      }

      $(document).ready(function() {
        setNavbarTop();
        $(window).scroll(function () {
          setNavbarTop();
        });
      });
  </script>
   

</body>
</html>